{{ define "main" }}
<div class="bd-layout docs-container">
    <aside class="bd-sidebar">
      <div class="offcanvas-lg offcanvas-start bd-sidebar-container" tabindex="-1" id="bdSidebar" aria-labelledby="bdSidebarOffcanvasLabel">
        <div class="offcanvas-header pb-4 border-bottom">
          <div class="d-flex offcanvas-title fw-bold" id="bdNavbarOffcanvasLabel">
            Crossplane Documentation -
            {{- if $.Param "docs" -}}
            {{ if ne .Page.Params.version "master" }} v{{ end}}{{.Page.Params.version}}
            {{- else }}
             {{.Page.Params.product }}
            {{ end }}
          </div>
          <div class="d-flex"><button type="button" class="btn-close bi align-self-center p-0" data-bs-dismiss="offcanvas" aria-label="Close" data-bs-target="#bdSidebar"></button></div>
        </div>
        <div class="offcanvas-body">
          <div class="container-fluid p-0">
              {{ partialCached "search-button" . }}
          </div>
      </div>
    </aside>

    <main class="bd-main order-1">
      <div class="bd-intro pt-2 ps-lg-2">
        <div class="d-md-flex flex-md-row-reverse align-items-center justify-content-between">
          <div class="mb-3 mb-md-0 d-flex">
          </div>
          <h1 class="bd-title mb-0" id="content">Page not found</h1>
        </div>
      </div>


        <div class="bd-content ps-lg-2 DocSearch-content">
          The page you're looking for couldn't be found.
          <br /><br />
          Only currently maintained versions of Crossplane are documented. Try
          looking at one of the following sections:
          <br /><br />
          {{ $versionList := slice }}
          {{ $majordict := dict }}
          {{ $majorlist := slice }}
          {{ $sorted_list := slice }}

          {{/* Collect all versions and parse semver for sorting */}}
          {{ range .Site.Sections }}
              {{/* Skip versions marked as hidden */}}
              {{ if not .Page.Params.hidden }}
                  {{ if eq .Page.Params.version "master" }}
                      {{$sorted_list = $sorted_list | append  "master" }}
                  {{ else if and (.Page.Params.version) (ne .Page.Params.version "0") }}
                      {{ $splitver := split .Page.Params.version "." }}
                      {{ if eq (len $splitver) 2 }}
                          {{ $verlist := (index $majordict (index $splitver 0)) }}
                          {{ $verlist = $verlist | append (index $splitver 1) }}
                          {{ $majordict = merge $majordict (dict (index $splitver 0) $verlist) }}
                          {{ $majorlist = $majorlist | append (index $splitver 0) }}
                      {{ end }}
                  {{ end }}
              {{ end }}
          {{ end }}

          {{/* Sort versions by semver (descending) and prepend to sorted_list */}}
          {{ $semver_sorted := slice }}
          {{ range sort ($majorlist | uniq) "value" "desc" }}
              {{ $majorver := . }}
              {{ range sort (index $majordict .) "value" "desc"  }}
                  {{$semver_sorted = $semver_sorted | append (printf "%s.%s" $majorver .) }}
              {{ end }}
          {{ end }}
          {{/* Prepend semver sorted versions before master */}}
          {{ $sorted_list = $semver_sorted | append $sorted_list }}

          <strong>Documentation Versions:</strong><br />
          {{ range $sorted_list }}
              {{ $versionPage := $.Site.GetPage (printf "v%s" .) | default ($.Site.GetPage .) }}
              {{ with $versionPage }}
                  <a href="{{ .Permalink }}">{{ if ne .Page.Params.version "master" }}v{{ end }}{{ .Page.Params.version }}</a>
                  {{ if eq .Page.Params.version $.Site.Params.latest }}
                      <span class="badge rounded-pill latest">Latest</span>
                  {{ end }}
                  {{ if eq .Page.Params.version "master" }}
                      <small><em>(unreleased upcoming version)</em></small>
                  {{ end }}
                  <br />
              {{ end }}
          {{ end }}

          <br />
          <p><small>Looking for an older version? Archived versions are available as tags in the <a href="https://github.com/crossplane/docs/tags">GitHub repository</a> (e.g., v1.19-archive, v1.18-archive).</small></p>

          <br />
          <strong>Other Resources:</strong><br />
          {{ range .Site.Sections }}
              {{ if and (not .Page.Params.hidden) (eq .Page.Params.version "0") }}
                  <a href="{{ .Permalink }}">{{ .Title }}</a><br />
              {{ end }}
          {{ end }}
        </div>
    </main>
  </div>

{{ end }}