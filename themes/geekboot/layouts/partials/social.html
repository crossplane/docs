{{ $isPage := or (and (ne .Type "posts") (in "section page" .Kind )) (and (eq .Type "posts") (eq .Kind "page")) }}

{{- if ne .Kind "home" }}
  <meta
    property="og:title"
    {{ partial "utils/title" . | printf "content=%q" | safeHTMLAttr }}
  />
{{- end }}
{{- with .Site.Title }}
  <meta property="og:site_name" {{ . | printf "content=%q" | safeHTMLAttr }} />
{{- end }}
{{- with partial "utils/featured" . }}
  <meta property="og:image" content="{{ . }}" />
{{- end }}
{{- with partial "utils/description" . }}
  <meta property="og:description" content="{{ . | plainify | htmlUnescape | chomp }}" />
{{- end }}
<meta property="og:type" content="{{ if $isPage }}article{{ else }}website{{ end }}" />
<meta property="og:url" content="{{ .Permalink }}" />

{{ if $isPage -}}
  {{- $iso8601 := "2006-01-02T15:04:05-07:00" -}}
  <meta property="article:section" content="{{ .Section | humanize | title }}" />
  {{- with .PublishDate }}
    <meta
      property="article:published_time"
      {{ .Format $iso8601 | printf "content=%q" | safeHTMLAttr }}
    />
  {{- end }}
  {{- with .Lastmod }}
    <meta
      property="article:modified_time"
      {{ .Format $iso8601 | printf "content=%q" | safeHTMLAttr }}
    />
  {{- end }}
{{- end }}