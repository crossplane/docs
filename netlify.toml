# Read the Netlify docs for details:
# https://docs.netlify.com/configure-builds/file-based-configuration/
#
#
# Build commands. Logic for previews vs prod are handled inside netlify_build.sh
[context.deploy-preview]
    command = "bash netlify_build.sh"

[context.production]
    command = "bash netlify_build.sh"

[build]
    base = "/"
    publish = "public/"
    command = "bash netlify_build.sh"

# The version of Hugo to use for the Netlify build.
[build.environment]
  HUGO_VERSION = "0.119.0"

#
# The following are Netlify redirects for moved docs pages
# https://docs.netlify.com/configure-builds/file-based-configuration/#redirects
#
[[redirects]]
from = "/docs/*"
to = "/:splat"
status = 302

# Redirects for EOL versions
[[redirects]]
from = "/v1.12/*"
to = "/latest/:splat"
status = 302

[[redirects]]
from = "/v1.11/*"
to = "/latest/:splat"
status = 302

[[redirects]]
from = "/v1.10/*"
to = "/latest/:splat"
status = 302

# Redirects for pre-Hugo docs
[[redirects]]
from = "/v1.9/concepts/managed-resources.html"
to = "/latest/concepts/managed-resources"
status = 302

[[redirects]]
from = "/v1.9/concepts/providers.html"
to = "/latest/concepts/providers"
status = 302

[[redirects]]
from = "/v1.9/getting-started/create-configuration"
to = "/latest/getting-started"
status = 302

[[redirects]]
from = "/v1.9/getting-started/install-configure"
to = "/latest/software/install/"
status = 302

[[redirects]]
# Redirects for deleted pages/sections
from = "/knowledge-base/install/**"
to = "/latest/software/"
status = 302

# Use [dev] to set configuration overrides for local
# development environments run using Netlify Dev - except
# for environment variables. Environment variables for Netlify
# Dev should be set under [context.dev.environment] instead.
[dev]
    command = "hugo server"
    port = 8888